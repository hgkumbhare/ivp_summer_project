import java.awt.Color;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Scanner;
import javax.imageio.ImageIO;

public class Text2Image {

	public static void text2image(String inputfilename, String outputdirectory) {
		try {
			Scanner scanner = new Scanner(new File(inputfilename));

			int index = 1;
			while (scanner.hasNext()) {
				int height = 0, width = 0, c;

				height = scanner.nextInt();
				width = scanner.nextInt();
				c = scanner.nextInt();

				BufferedImage image = new BufferedImage(w, h,
						BufferedImage.TYPE_INT_RGB);
				for (int y = 0; y < height; ++y) {
					for (int x = 0; x < width; ++x) {
						if (c == 3) {
							Color myWhite = new Color(scanner.nextInt(),
									scanner.nextInt(), scanner.nextInt());
							int rgb = myWhite.getRGB();
							image.setRGB(x, y, rgb);
						} else if (c == 1) {
							int value = scanner.nextInt();
							int gray = value << 16 | value << 8 | value;
							image.setRGB(x, y, gray);
						} else {
							throw new IllegalArgumentException("Invalid Input");
						}
					}
				}
				ImageIO.write(image, "jpg",
						new File(outputdirectory, Integer.toString(index)
								+ ".jpg"));
				index++;
			}
			scanner.close();
		} catch (Exception e) {
		}
	}

	static public void main(String args[]) throws IOException {
		String inputfilename = args[0];
		String outputdirectory = args[1];
		text2image(inputfilename, outputdirectory);
	}
}
